values:
  - ../values.yaml
  - fixtures/default_values.yaml
suite: Secret
templates:
  - templates/secret.yaml
tests:
   - it: Renders a valid universal broker secret
     asserts:
      - matchSnapshot:
          path: stringData

   - it: should render broker platform auth secret with expected values
     asserts:
      - isKind:
            of: Secret
      - equal:
          path: stringData.deploymentId
          value: "8B338A3B-424A-497E-836E-5E0F9486605A"
      - equal:
          path: stringData.clientId
          value: "8B338A3B-424A-497E-836E-5E0F9486605A"
      - equal:
          path: stringData.clientSecret
          value: "8B338A3B-424A-497E-836E-5E0F9486605A"
      - equal:
          path: stringData.mygithubtoken
          value: "8B338A3B-424A-497E-836E-5E0F9486605A"

   - it: should render broker platform auth secret with expected values
     set:
        existingAuthSecret: "some-existing-secret"
     asserts:
      - hasDocuments:
          count: 0
